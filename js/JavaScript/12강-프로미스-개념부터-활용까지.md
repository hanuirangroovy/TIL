# 프로미스 개념부터 활용까지 JavaScript Promise

[자바스크립트 기초 강의 12]: https://www.youtube.com/watch?v=s1vpVCrT8f4&amp;list=PLv2d7VI9OotTVOL4QmPfvJWPJvkmv6h-2&amp;index=12



## Promise

- 비동기를 간편하게 처리할수록 도와주는 object
- 정해진 장시간의 기능을 수행하고나서 정상적으로 기능이 수행해졌다면 성공의 메세지와 함께 처리된 결과값을 전달. 
- 기능을 수행하다 예상치 못한 문제가 발생했다면 에러를 전달
- JavaScript 안에 내장되어 있는 object
- 비동기적인 것을 수행할 때 콜백함수 대신에 유용하게 쓸 수 있는 object
- 두 가지 포인트
  - State
    - process가 무거운 operation을 수행하고 있는 중인지 아니면 기능 수행이 다 완료가 되어 성공했는지 실패했는지 등의 상태
    - producer(우리가 원하는 데이터를 producing 제공하는 사람)와 consumer(제공된 데이터를 쓰는, 필요로 하는 사람) 차이 알기
- promise의 상태는 promise가 만들어져서 우리가 지정한 operation이 수행 중일 때는 pending 상태
- 이 operation을 끝내게 되면 fulfilled state가 됨
- file을 찾을 수가 없거나 network 상태에 문제가 생긴다면 rejected state가 됨
- Producer
  - 우리가 원하는 기능을 수행해서 해당하는 데이터를 만들어내는 promise object
- Consumer
  - 우리가 원하는 데이터를 소비



## 1. Promise 만들기

- promise는 class이기에 new라는 키워드를 이용해서 object 생성
- promise의 생성자를 보면 executor라는 콜백 함수를 전달해줘야하는데 콜백함수에는 또 다른 두 개의 콜백함수를 받음
  - resolve - 기능을 정상적으로 수행해서 최종데이터를 전달하는 콜백함수
  - reject - 기능을 수행하다 중간에 문제가 생기면 호출
- 보통 promise 안에선 조금 heavy한 일들을 함
  - 네트워크에서 데이터를 받아오거나 file에서 무언가 큰 데이터를 읽어오는 과정은 시간이 꽤 걸림. 이것을 동기적으로 처리하게 되면 이러한 일을 하는 동안 다음 line의 코드가 실행되지 않기 때문에 시간이 걸리는 일들은 promise를 만들어 비동기적으로 처리하는 게 좋음

- 새로운 promise가 만들어 질 때는 전달한 executor 콜백 함수가 바로 실행이 됨. 이 부분을 염두에 두고 코드를 작성해야 함.



## 2. Promise 사용하기

- Consumers는 then, catch, finally를 이용해 값을 받아올 수 있음
- 만든 promise를 이용해서 값이 정상적으로 수행된다면 then
  - then은 promise가 정상적으로 잘 수행이 되어서 마지막에 최종적으로 resolve라는 콜백함수를 통해 전달한 값이 value에 파라미터로 전달되어 들어온 걸 볼 수 있음.
- value라는 파라미터는 promise가 정상적으로 잘 수행이 되어 마지막으로 resolve 콜백함수에서 전달된 ellie라는 값이 들어옴.
- reject - 보통 error라는 object를 통해서 값을 전달
  - Error라는 클래스는 JavaScript에서 제공하는 obejct 중 하나
  - Error는 무언가 에러가 발생했다는걸 나타내는 object
  - Error object에는 어떤 에러가 발생했는지 이유를 잘 명시해서 작성해야함

- 잡히지 않은 Error가 생겼을 때 Error핸들링 잘하는 법
  - promise에서 then이라는 api를 이용해서 성공적인 case를 잘 다뤘다면 catch라는 함수를 이용해서 error가 발생했을 때 어떻게 처리할 건지 콜백함수를 등록해주면 됨

- finally - 성공하든 실패하든 상관없이 무조건 마지막에 호출되어짐



## 3. Promise 연결하기

- then에서는 값을 바로 전달해도 되고 비동기인 promise를 전달해도 됨



## 4. 오류를 잘 처리하자

- promise를 chaining 했을 때 어떻게 error를 핸들링할 수 있는지