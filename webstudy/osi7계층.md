# OSI(Open System Interconnection) 7계층 

- 네트워크 통신의 표준
  - 네트워크
    - 사용자 혹은 데이터가 어떤 곳에서 다른 곳으로 이동할 수 있게 만든 통로
- 개방형 시스템의 상호연결 모델의 표준

- 컴퓨터 통신 구조의 모델과 앞으로 개발될 프로토콜의 표준적인 뼈대를 제공하기 위해 개발된 참조 모델인만큼 OSI 계층 모델을 알면 네트워크 구성을 예측하고 이해할 수 있음.
- 네트워크에서 트래픽의 흐름을 꿰뚫어 볼 수 있으며, 각 계층은 독립되어 있어 7단계 중 특정한 곳에 이상이 생기면 다른 단계의 장비 및 소프트웨어를 건드리지 않고도 이상이 생긴 단계만 고칠 수 있음.



## OSI 7계층이란?

![The 7 Layers of OSI](md-images/The%207%20Layers%20of%20OSI.png)

- 네트워크 프로토콜이 통신하는 구조를 7개의 계층으로 분리하여 각 계층간 상호 작동하는 방식을 정해놓은 것.

  - 1계층 - 물리계층(Physical Layer)

  - 2계층 - 데이터링크 계층(DataLink Layer)

  - 3계층 - 네트워크 계층(Network Layer)

  - 4계층 - 전송 계층(Transport Layer)

  - 5계층 - 세션 계층(Session Layer)

  - 6계층 - 표현 계층(Presentation Layer)

  - 7계층 - 응용 계층(Application Layer)

  - | 계층 | 이름            | 단위(PDU)                 | 예시                                                         | 프로토콜                                                     | 디바이스             |
    | ---- | --------------- | ------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | -------------------- |
    | 7    | 응용계층        | Data                      | 텔넷, 구글 크롬, 이메일, 데이터베이스 관리                   | HTTP, SMTP, SSH, FTP, Telnet, DNS, modbus, SIP, AFP, APPC, MAP |                      |
    | 6    | 표현 계층       | Data                      | 인코딩, 디코딩, 암호화, 복호화                               | ASCII, MPEG, JPEG, MIDI, EBCDIC, XDR, AFP, PAP               |                      |
    | 5    | 세션 계층       | Data                      |                                                              | NetBIOS, SAP, SDP, PIPO, SSL, SSH, TLS, NWLink, ASP, ADSP, ZIP, DLC, ISO8327, Apple talk, |                      |
    | 4    | 전송 계층       | TCP-Segment, UDP-datagram | 특정 방화벽 및 프록시 서버                                   | TCP, UDP, SPX, SCTP, NetBEUI, RTP, ATP, NBP, AEP, OSPF       | 게이트웨이, L4스위치 |
    | 3    | 네트워크 계층   | Packet                    | 라우터                                                       | IP, IPX, IPsec, ICMP, ARP, NetBEUI, RIP, BGP, DDP, PLP       | 라우터               |
    | 2    | 데이터링크 계층 | Frame                     | MAC 주소, 브리지 및 스위치                                   | Ethernet, Token Ring, AppleTalk, PPP, ATM, MAC, HDLC, FDDI, LLC, ALOHA | 브리지, 스위치       |
    | 1    | 물리 계층       | Bit                       | 전압, 허브, 네트워크 어댑터, 중계기 및 케이블 사양, 신호 변경(디지털, 아날로그) | 모뎀, 10BASE-T, 100BASE-TX, ISDN, wired, wireless, RS-232C, DSL, Twinax | 허브, 리피터         |

    

- 모든 통신 시스템이 7계층을 다 가지고 있는 것은 아님

  - 7계층 다 구현 ex. Gateway
  - 하위 1계층 구현 ex. 각종 케이블
  - 3계층 구현 ex. 라우터

- 필요에 따라 모든 하드웨어 및 소프트웨어는 하나의 계층만으로 구현될 수 있고 여러 개의 계층에 걸쳐 구현될 수도 있음

- 두 컴퓨터가 서로 네트워크를 형성하여 데이터를 주고받기 위해서는 7계층이 다 구현되어야 함



## 등장 배경

- 과거 여러 정보 통신업체들은 자사 장비간의 연결만 지원하고 타사 장비와의 호환성은 지원하지X

- 1980년대 컴퓨터 통신망이 확산되어 다양한 통신망 혼재 상황에서 기능별 분류 필요
- 통신망별 정보교환을 위한 별도의 절차를 마련하는 것은 비효율적이기에 네트워크 유형에 상관없이 상호 통신이 가능한 지침 필요
- 일반적인 통신 환경에서 서로 통신을 원하는 양 당사자는 신뢰성 있고 원할한 통신을 수행하기 위해 서로 합의에 의해 설정한 통신 규약인 프로토콜을 가지게 됨
- 컴퓨터 간 네트워크의 필요성이 절실하게 대두되자 상호 이질적인 네트워크 간의 연결에 호환성 결여를 막기위해  ISO(국제표준화기구)는 OSI 7계층이라는 새로운 네트워크 모델을 발표
- OSI 7계층은 서로 다른 컴퓨터 기기 간에 네트워크를 형상할 수 있도록 규정한 네트워크 모델 표준안
- 표준화를 통하여 장비별로 이질적인 포트 프로토콜의 호환 문제를 해결하고, OSI 모델을 이용하여 네트워크 시스템에서 일어나는 일을 쉽게 설명할 수 있게 함
- 네트워크 관리자가 문제가 발생했을 때 물리적인 문제인지, 응용프로그램과 관려있는지 등 원인이 어디에 있는지 범위를 좁혀 쉽게 파악할 수 있게 함
- 모든 통신 관련 시스템, 즉 각종 네트워크 장비 및 컴퓨터기기 등에 동일하게 적용되는 개념이며 우리가 사용하고 접하는 모든 통신 관련 시스템은 OSI 계층 범주에 속하게 됨



## 특징

- 데이터 캡슐화
  - 전송시에 7계층에서 1계층으로 각각의 층마다 인식할 수 있도록 헤더를 붙이며 캡슐화를 하고 1계층에서 헤드를 떼어내며 디캡슐화를 해서 데이터를 전송받음.
  - 사용자 데이터가 각 계층을 지나면서 하위 계층은 상위 계층으로부터 온 정보를 데이터로 취급
  - 자신의 계층 특성을 담은 제어정보를 헤더화 시켜 붙이는 과정
  - 데이터를 보낼 때는 응용 계층에서 시작되어 OSI 계층을 차례로 내려오며 물리 계층으로 감.
  - 이 과정에서 캡슐화를 하게되는데 각 계층은 다른 계층과 통신할 때 데이터에 특정 정보가 들어있는 머리말과 꼬리말을 추가한 후 다른 계층으로 전달
  - PDU(Protocol Data Unit)은 프로토콜 데이터 단위로 OSI 모델의 정보 처리 단위인데 캡슐화 과정에서 만들어짐
  - 아래 계층으로 내려갈수록 PDU에는 다양한 프로토콜에 의해 헤더와 푸터가 더해짐
  - 마지막 물리 계층에서 PDU는 최종적인 모습으로 변하며, 데이터를 보내는 접점이 됨
  - 반대로 데이터를 받은 컴퓨터는 PDU로부터 프로토콜의 헤더와 푸터를 분석하며 올라가 마지막 응용 계층에 도달하면 원본 데이터만 남음.
  



## 기능

### 응용 계층

![2023-01-17 23;17;36](md-images/2023-01-17%2023;17;36.PNG)

- OSI 7계층 모델에서 최상위 계층
- 사용자가 네트워크 자원에 접근하는 방법 제공
- 최종적으로 사용자가 볼 수 있는 유일한 계층으로 모든 네트워크 활동의 기반이 되는 인터페이스를 제공
- 사용자가 사용하는 응용 프로그램들이 속한다고 보면 됨.



### 표현 계층

![2023-01-17 23;17;29](md-images/2023-01-17%2023;17;29.PNG)

- 응용 계층으로부터 전달받은 데이터를 읽을 수 있는 형식으로 변환함.
- 응용 계층으로부터 전송받거나 응용 계층으로 전달해야할 데이터의 인코딩과 디코딩이 여기서 이루어짐
  - EX. 유니코드(UTP-8)로 인코딩 되어있는 문서를 ASCII로 인코딩 된 문서로 변환하려 할 때 이 계층에서 변환이 이루어짐
- 데이터를 안전하게 사용하기 위해서 암호화와 복호화를 함



### 세션 계층

![2023-01-17 23;17;21](md-images/2023-01-17%2023;17;21.PNG)

- 통신장치간 상호작용및 동기화 등 양 끝단의 프로세스가 통신을 관리하기 위한 방법 제공
- 연결세션에서 데이터교환과 에러 발생 시 복구관리

- 두 컴퓨터 간의 대화나 세션을 관리하며 Port 연결이라고도 함
- 모든 통신 장치 간에 연결을 설정하고 관리 및 종료, 연결이 양방향인지 단방향인지 여부 확인, 체크 포인팅과 재시작 과정 등을 수행
- 호스트가 갑자기 중지되지 않고 정상적으로 호스트를 연결하는 데 책임이 있음
- TCP/IP 세션을 만들고 없애고 통신하는 사용자들을 동기화하고 오류 복구 명령들을 일괄적으로 다루며 통신을 하기 위한 세션을 확립, 유지, 중단하는 작업을 수행



### 전송 계층

![2023-01-17 23;17;11](md-images/2023-01-17%2023;17;11.PNG)

- 하위 계층에 신뢰할 수 있는 데이터 전송 서비스 제공
- 컴퓨터와 컴퓨터 간에 신뢰성 있는 데이터를 서로 주고받을 수 있도록 해주어 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 부담을 덜어줌
- 이때 시퀀스 넘버 기반의 오류 제어 방식 사용
- 흐름 제어, 분할/분리 및 오류 제어를 통해 전송 계층은 데이터가 오류없이 점대점으로 전달되게 하는데 신뢰할 수 있는 데이터 전송을 보장하는 것은 번거롭기에 OSI 모델은 전체 계층을 사용
- 연결형 프로토콜과 비연결형 프로토콜 모두 사용



### 네트워크 계층

![2023-01-17 23;17;04](md-images/2023-01-17%2023;17;04.PNG)

- 중계노드를 통하여 전송하는 경우 어떻게 중계할 것인가를 규정

- 2홉 이상의 통신을 담당
- 실제 네트워크 간에 데이터 라우팅 담당
  - 라우팅 - 어떤 네트워크 안에서 통신 데이터를 짜여진 알고리즘에 의해 최대한 빠르게 보낼 최적의 경로를 선택하는 과정
- 네트워크 호스트의 논리 주소 지정을 확인
- 데이터 스트림을 더 작은 단위로 분할하고 경우에 따라 오류를 감지해 처리
- 여러 개의 노드를 거칠 때마다 경로를 찾아주는 역할을 하는 계층
  - 경로를 찾을 때는 IP주소 이용
  - 보통 컴퓨터는 라우터를 거쳐서 다른 곳에 위치한 서버에 접속
  - 각각의 라우터는 라우팅을 통해 경로를 찾음
  - 접속하고자 하는 서버의 IP주소가 우리와 동일한 라우터 상에 존재하지 않는다면 우리 컴퓨터를 포함하고 있는라우터 바깥쪽 IP로 포워딩을 해주는데 이런 전반적인 일을 해줌

- 다양한 길이의 데이터를 네트워크들을 통해 전달하고 그 과정에서 전송 계층이 요구하는 서비스 품질을 제공하기 위한 기능적, 절차적 수단을 제공
- 라우팅, 흐름제어, 세그멘테이션, 오류제어, 인터네트워킹 등을 수행



### 데이터링크 계층

![2023-01-17 23;16;42](md-images/2023-01-17%2023;16;42.PNG)

- 물리적인 네트워크를 통해 인접한 두 장치간의 신뢰성있는 데이터를 전송하는 수단을 제공
  - 두 장치(지점)의 분류는 맥주소. 
  - 맥주소는 모든 장치마다 가지고 있는 고유한 물리적인 주소. 장치마다 랜카드에 정보들이 저장되어 있음

- 주소와 제어정보 가지고 있음
- 정보의 오류와 흐름을 관리하여 안정된 정보를 전달
- 1홉 통신 담당
  - 홉 - 컴퓨터 네트워크에서 노드에서 다음 노드로 가는 경로
  - 1홉 통신 - 한 라우터에서 그 다음 라우터까지의 경로
- 물리적인 장치를 식별하는 데 사용할 수 있는 주소 지정 쳬계 제공이 목적
- 포인트 투 포인트 간의 신뢰성 있는 전송을 보장하기 위한 계층으로 CRC 기반의 오류제어와 흐름제어가 필요
- 네트워크 위의 개체들 간 데이터를 전달하고 물리 계층에서 발생할 수 있는 오류를 찾아내고 수정하는데 필요한 기능적, 절차적 수단을 제공



### 물리 계층

![2023-01-17 23;16;24](md-images/2023-01-17%2023;16;24.PNG)

- OSI 모델의 맨 밑에 있는 계층
- 네트워크 데이터가 전송되는 물리적인 매체
- 데이터는 0과 1의 비트열로 ON, OFF의 전기적 신호 상태로 이루어짐
- 전압 허비, 네트워크 어댑터, 중계기 및 케이블 사양을 비롯해 사용된 모든 하드웨어 물리적 및 전기적 특성을 정의
- 연결을 설정 및 종료하고 통신 자원을 공유하는 수단을 제공하며 디지털에서 아날로그 또는 그 반대로 신호를 변환하는 역할
- 전기적, 기계적 특성을 이용하여 통신케이블로 전기적 신호 전송
- 실제로 장치들을 연결하기 위한 물리적인 사항을 정의하며 단지, 데이터 전달의 역할



### 정리

![osi정리](md-images/osi%EC%A0%95%EB%A6%AC.jpg)

- 기계가 다르면? 물리계층 교체
- IP주소, 경로선택 기술이 다르면? 네트워크계층 변경



## OSI 7계층 VS TCP/IP 4계층

![TCP/IP model vs OSI model |](md-images/TCP-IP-model-vs-OSI-model.png)

### TCP/IP

-  수많은 프로그램들이 인터넷으로 통신하는데 기반이 되는 프로토콜
- 이를 이용해 컴퓨터를 연결하는 체계를 이더넷
- 인터넷에 연결된 서로 다른 기종의 컴퓨터들이 데이터를 주고받을 수 있도록 하는 인터넷 프로토콜을 만드는 것이 목표
- 응용 계층, 전송 계층, 인터넷 계층, 네트워크 액세스 계층으로 구성
- 일반적으로 배우는 TCP/IP 계층 구조는 4계층으로 이루어지며  OSI 7계층과 흡사한 구조를 가지고 있지만 계층을 묶는 기준에 차이가 있음



### 공통점

- 둘 다 패킷을 이용해 통신하고 계층 구조를 가짐

| 구분      | 공통점                | 설명                  |
| --------- | --------------------- | --------------------- |
| 계층 역할 | 캡슐화, 프로토콜 사용 | 계층 간 역할 정의     |
| 계층 역할 | 서비스 primitive      | 요구, 지시 응답, 확인 |
| 통신 역할 | 페이로드 전송 기능    | APP간 메시지 교환     |
| 통신 역할 | 다중화, 역다중화      | 포토 기반 세그먼트화  |



### 차이점

| 항목 | OSI 7계층(국제 공식 표준) | TCP/IP 4계층(비공식 표준) |
| ---- | ------------------------- | ------------------------- |
| 계층 | 7계층 모델                | 4 계층 모델               |
| 구성 | 역할 기반 계층 구성       | 프로토콜의 집합 기반      |
| 기술 | 통신전반 기술 표준화      | 데이터 전송기술 특화      |
| 활용 | 통신 모델 표준 제시       | 실무적 통신기술 구현      |

