# HTTP(HyperText Transfer Protocol)

## HTTP 개요

- HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜
- WEB에서 이루어지는 모든 데이터 교환의 기초로 클라이언트-서버 프로토콜
  - 클라이언트-서버 프로토콜 - 수신자 측에 의해 요청이 초기화되는 프로토콜
  - 요청(requests) - 보통 브라우저인 클라이언트에 의해 전송되는 메시지
  - 응답(response) - 그에 대해 서버에서 응답으로 전송되는 메시지
- 애플리케이션 계층의 프로토콜
  - 신뢰 가능한 전송 프로토콜이라면 이론상으로는 무엇이든 사용할 수 있으나 TCP 혹은 암호화된 TCP 연결인 TLS를 통해 전송



## HTTP 기반 시스템의 구성요소

- 요청은 하나의 개체, 사용자 에이전트에 의해 전송됨
- 대부분의 경우 사용자 에이전트는 브라우저지만 무엇이든 가능함.
- 각각의 개별적인 요청들은 서버로 보내지며, 서버는 요청을 처리하고 response라고 불리는 응답을 제공
- 이 요청과 응답 사이에는 여러 개체들이 있음
  - ex. 다양한 작업을 수행하는 게이트웨이 또는 캐시 역할을 하는 프록시 등
- HTTP는 애플리케이션 계층의 최상위에 위치



### 클라이언트: 사용자 에이전트

- 사용자 에이전트는 사용자를 대신하여 동작하는 모든 도구
  - 이 역할은 주로 브라우저에 의해 수행
- 브라우저는 항상 요청을 보내는 개체
- 웹페이지는 하이퍼텍스트 문서로 표시된 텍스트의 일부는 사용자가 사용자 에이전트를 제어하고 웹을 돌아다닐 수 있도록 새로운 웹페이지를 가져오기 위해 실행될 수 있는 링크를 뜻함.
- 브라우저는 HTTP 요청 내에서 이런 지시 사항들을 변환하고 HTTP 응답을 해석하여 사용자에게 명확한 응답을 표시 



### 웹 서버

- 통신 채널의 반대편에는 클라이언트에 의한 요청에 대한 문서를 제공하는 서버가 존재
- 서버는 논리상 단일기계이나 반드시 단일 기계일 필요는 없고 여러 개의 서버를 동일한 머신 위에서 호스팅할 수는 있음.



### 프록시

- 웹 브라우저와 서버 사이에서는 수많은 컴퓨터와 머신이 HTTP 메시지를 이어 받고 전달함
- 여러 계층으로 이루어진 웹 스택 구조에서 이러한 컴퓨터/머신들 대부분은 전송, 네트워크 혹은 물리 계층에서 동작하며 성능에 큰 영향을 주지만 HTTP 계층에서는 이게 어떻게 동작하는지 눈에 보이지 않음
- 컴퓨터/ 머신 중에서도 애플리케이션 계층에서 동작하는 것들을 일반적으로 프록시라고 부름
- 프록시는 눈에 보이거나 그렇지 않을 수 있으며 다양한 기능 수행
  - 캐싱(캐시는 공개 또는 비공개가 될 수 있음)
  - 필터링(바이러스 백신 스캔, 유해 컨텐츠 차단 기능)
  - 로드밸런싱(여러 서버들이 서로 다른 요청을 처리하도록 허용)
  - 인증(다양한 리소스에 대한 접근 제어)
  - 로깅(이력 정보를 저장)



##  HTTP 기초적인 측면

- 간단함

  - HTTP 메시지를 프레임 별로 캡슐화하여 간결함을 유지
  - HTTP 메시지들은 사람이 읽고 이해할 수 있어, 테스트하기 쉽고 초심자의 진입장벽 낮춤

- 확장 가능

  - 클라이언트와 서버가 새로운 헤더의 시맨틱에 대해 간단한 합의만 한다면, 언제든지 새로운 기능을 추가할 수 있음

- HTTP은 상태는 없지만 세션은 있음

  - HTTP는 상태를 저장하지 않음
  - 동일한 연결 상에서 연속하여 전달된 두 개의 요청 사이에는 연결고리가 없음
  - HTTP 쿠키는 상태가 있는 세션을 만들도록 해줌
  - 헤더 확장성을 사용하여, 동일한 컨텍스트 또는 동일한 상태를 공유하기 위해 각각의 요청들에 세션을 만들도록 HTTP 쿠키가 추가됨

- HTTP와 연결

  - 연결은 전송 계층에서 제어되므로 근본적으로 HTTP 영역 밖
  - HTTP는 연결될 수 있도록 하는 근본적인 전송 프로토콜을 요구하지 않음
  - 신뢰할 수 있거나 메시지 손실이 없는 연결을 요구
  - 가장 일반적인 두 개의 전송 프로토콜 중 TCP는 신뢰할 수 있기에 연결 기반인 TCP 표준에 의존
  - 클라이언트와 서버가 HTTP를 요청/응답으로 교환하기 전에 여러 왕복이 필요한 프로세스인 TCP 연결을 설정해야함.

  

## HTTP로 제어할 수 있는 것

- 캐시
- origin 제약사항을 완화
- 인증
- 프록시와 터널링
- 세션



## HTTP 흐름

- 클라이언트가 서버와 통신하고자 할 때 수행
  - TCP 연결을 염.
    - TCP 연결은 요청을 보내거나 응답을 받는데 사용
    - 클라이언트는 새 연결을 열거나, 기존 연결을 재사용하거나, 서버에 대한 여러 TCP연결을 열 수 있음
  - HTTP 메시지 전송
  - 서버에 의해 전송된 응답을 읽어드림
  - 연결을 닫거나 다른 요청들을 위해 재사용



## HTTP 메시지

- HTTP 메시지의 두 가지 타입인 요청과 응답



### 요청

- HTTP 메서드
- 가져오려는 리소스의 경로
- HTTP 프로토콜의 QJWJS
- 서버에 대한 추가 정보를 전달하는 선택적 헤더들
- POST 와 같은 몇 가지 메서드를 위한, 전송된 리소스를 포함하는 본문



### 응답

- HTTP 프로토콜의 버전
- 요청의 성공 여부와 그 이유를 나타내는 상태 코드
- 상태코드의 짧은 설명을 나타내는 상태 메시지
- 요청 헤더와 비슷한, HTTP 헤더들
- 선택 사항으로 가져온 리소스가 포함되는 본문



