# 트리

비선형 구조

원소들 간에 1:n 관계를 가지는 자료구조.

원소들 간에 계층관계를 가지는 계층형 자료구조.

상위 원소에서 하위 원소로 내려가면서 확장되는 트리 모양의 구조.



## 정의

- 한 개 이상의 노드로 이루어진 유한 집합
  - 노드 중 최상위 노드를 루트라 한다.
  - 나머지 노드들은 분리될 수 있다. 이들은 하나의 트리가 되며(재귀적 정의) 루트의 부 트리라 함.



## 용어

- 노드 : 트리의 원소
- 간선 : 노드를 연결하는 선. 부모 노드와 자식 노드를 연결
- 루트 노드 : 트리의 시작 노드
- 형제 노드 : 같은 부모 노드의 자식 노드들
- 조상 노드 : 간선을 따라 루트 노드까지 이르는 경로에 있는 모든 노드들
- 서브 트리 : 부모노드와 연결된 간선을 끊었을 때 생성되는 트리
- 자손 노드 : 서브 트리에 있는 하위 레벨들 노드들
- 차수
  - 노드의 차수 : 노드에 연결된 자식 노드의 수
  - 트리의 차수 : 트리에 있는 노드의 차수 중에서 가장 큰 값
  - 단말 노드 : 차수가 0인 노드. 자식 노드가 없는 노드.
- 높이
  - 노드의 높이 : 루트에서 노드에 이르는 간선의 수.
  - 트리의 높이 : 트리에 있는 노드이 높이 중에서 가장 큰 값 최대 레벨



## 이진트리

모든 노드들이 2개의 서브트리를 갖는 특별한 형태의 트리



- 특성
  - 레벨 i에서의 노드 최대 개수 : 2^i 개
  - 높이가 h인 이진트리가 가질 수 있는 노드 최소 개수 : h+1, 최대개수 : 2^(h+1)-1개
- 포화이진트리 
  - 모든 레벨에 노드가 포화상태로 차있는 이진트리
  - 높이가 h일 때,  2^(h+1)-1의 노드를 가진 이진 트리

- 완전이진트리

  - 높이가 h이고 노드 수가 n개 일 때, 포화 이진트리의 노드 번호 1번부터 n번까지 빈 자리가 없는 이진 트리

- 평향이진트리

  - 높이 h에 대한 최소 개수의 노드를 가지면서 한쪽 방향의 자식 노드만을 가진 이진 트리

  

  ## 이진트리 - 순회

- 순회

  - 트리의 각 노드를 중복되지 않게 전부 방문하는 것
  - 비선형구조이기에 선후 연결 관계를 알 수 없음.

- 순회방법

  - 전위순회 : 부모노드 방문 후, 자식노드를 좌, 우 순서로 방문.
  - 중위순회 : 왼쪽 자식노드, 부모노드, 오른쪽 자식노드 순으로 방문.
  - 후위순회 : 자식노드를 좌우 순서로 방문한 후, 부모노드로 방문.

- 전위순회

  - 수행 방법
    1. 현재 노드 n을 방문하여 처리 -> V
    2. 현재 노드 n의 왼쪽 서브트리로 이동 -> L
    3. 현재 노드 n의 오른쪽 서브트리로 이동 -> R

  ```
  def preorder_traverse(T):     #전위순회
  	if T :     # T is not None
  		visit(T)     #print(T.item)
  		preorder_traverse(T.left)
  		preorder_traverse(T.right)
  ```

- 중위순회

  - 순회방법
    1. 현재 노드 n의 왼쪽 서브트리로 이동 : L
    2. 현재 노드 n을 방문하여 처리 :V
    3. 현재 노드 n의 오른쪽 서브트리로 이동 : R

  ```
  def inorder_traverse(T):     #중위순회
  	if T:     #T is not None
  		inorder_traverse(T.left)
  		visit(T)     #print(T.item)
  		inorder_traverse(T.rignt)
  ```

- 후위순회

  - 순회방법
    1. 현재 노드 n의 왼쪽 서브트리로 이동 : L
    2. 현재 노드 n의 오른쪽 서브트리로 이동 : R
    3. 현재 노드 n을 방문하여 처리 : V

  ```
  def postorder_traverse(T):     #후위순회
  	if :     #T is not None
  		postorder_traverse(T.left)
  		postorder_traverse(T.right)
  		visit(T)     print(T.item)
  ```

- 순회 연습 문제

  - 전위 순회 : A B D H I E J C F K G L M
  - 중위 순회 : H D I J E B A K F C L G M
  - 후위 순회 : H I D J E B K F L M G C A

  

## 이진트리의 표현

- 배열을 통한 이진 트리의 표현
  - 포화, 완전이진트리의 저장방법
    - 인덱스 = 정점번호
    - 노드번호가 I인 노드의 부모노드 번호?     ⌊i/2⌋
    - 노드 번호가 i인 노드의 왼쪽 자식 노드 번호?      2*i
    - 노드 번호가 i인 노드의 오른쪽 자식 노드 번호?     2*i+1
    - 레벨 n의 노드 번호 시작 번호는?     2^n    
- 완전 이진

- 연습문제

  ```
  v <- 정점 수
  v-1개의 간선에 대한 정보
  p, c <- read()    #p:부모, c:자식
  left[p] <- c  #부모를 인덱스로 자식 번호 저장. 
  if left[p] ==0:   #먼저 들어오면 왼쪽자식. 나중에 들어오면 오른쪽 자식
  	left[p] <- c
  else:
  	right[p] <- c
  ```

  

## 수식 트리

- 수식을 표현하는 이진트리
- 연산자는 루트 노드 or 가지 노드
- 피연산자는 모두 잎 노드



## 수식트리의 순회

- 중위 순회 : A / B * C * D + E (식의 중위 표기법)
- 후위 순회 : A B / C * D * E + (식의 후위 표기법)
- 전위 순회 : +**/ ABCDE (식의 전위 표기법)



## 이진 탐색 트리

- 탐색작업을 효율적으로 하기 위한 자료구조
- 모든 원소는 서로 다른 유일한 키를 갖음.
- key(왼쪽 서브트리) < key(루트 노드) < key(오른쪽 서브트리)
- 중위 순회하면 오름차순으로 정렬된 값을 얻을 수 있음.



## 힙 연산

- 삽입

  - 완전이진트리 유지

  ````
  heap = []
  last = 0
  enQ(n)
  last += 1
  heap[last] : n
  if heap[last//2] > heap[last]:
  종료
  ````

  ```
  #어긋나는 경우 : 부모의 key 값이 더 작음
  enQ(n)
  last += 1
  heap[last] = n  
  c = last
  p = c//2
  while p>0 and heap[p] < heap[c]:
  h[p] <-> h[c]
  c <- p
  p <- c//2
  부모의 키값이 작으면 부모가 없거나(root거나) 부모가 key가 클 때까지 부모와 key값을 계속 교환
  ```

- 힙에서의 삭제

  - 완전이진트리 유지